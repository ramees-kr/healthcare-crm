<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Task Form</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
    <h2 th:text="${task.id} != null ? 'Edit Task' : 'Add Task'"></h2>
    <div class="card">
        <div class="card-body">
            <form th:action="${task.id} != null ? '/admin/tasks/update/' + ${task.id} : '/admin/tasks/add'"
                  th:object="${task}"
                  method="post">

                <!-- Hidden Field for ID -->
                <input type="hidden" th:field="*{id}">

                <div class="mb-3">
                    <label class="form-label">Task Name:</label>
                    <input type="text" class="form-control" th:field="*{taskName}" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">Customer:</label>
                    <select class="form-control" th:field="*{customer}" required>
                        <option value="">Select Customer</option>
                        <option th:each="customer : ${customers}"
                                th:value="${customer.id}"
                                th:text="${customer.name}"></option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label">Employee:</label>
                    <select class="form-control" th:field="*{employee}" required>
                        <option value="">Select Employee</option>
                        <option th:each="employee : ${employees}"
                                th:value="${employee.id}"
                                th:text="${employee.name}"></option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label">Due Date:</label>
                    <input type="datetime-local" class="form-control" th:field="*{dueDate}" required>
                </div>

                <div class="mb-3">
                    <label class="form-label">Priority:</label>
                    <select class="form-control" th:field="*{priority}" required>
                        <option value="">Select Priority</option>
                        <option value="Low" th:text="'Low'">Low</option>
                        <option value="Medium" th:text="'Medium'">Medium</option>
                        <option value="High" th:text="'High'">High</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label">Description:</label>
                    <textarea class="form-control" th:field="*{description}" required></textarea>
                </div>

                <div class="mb-3">
                    <label class="form-label">Status:</label>
                    <select class="form-control" th:field="*{status}" required>
                        <option value="">Select Status</option>
                        <option value="Pending" th:text="'Pending'">Pending</option>
                        <option value="Completed" th:text="'Completed'">Completed</option>
                        <option value="In Progress" th:text="'In Progress'">In Progress</option>
                    </select>
                </div>

                <span style="color: red;" th:text="${error}"></span>
                <button type="submit" class="btn btn-success">Save</button>
                <a th:href="@{/admin/tasks}" class="btn btn-secondary">Cancel</a>
            </form>
        </div>
    </div>
</div>
</body>
</html>
